<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Login | Te Kōhanga</title>
    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css" rel="stylesheet" />
    <link href="static/css/main.css" rel="stylesheet" />
    <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            background-image: url("{{ url_for('static', filename='figs/bg.jpg') }}");
            background-repeat: repeat;
            background-size: auto;
            background-position: top left;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand navbar-dark bg-dark">
        <!-- Navbar Brand-->
        <a class="navbar-brand ps-3" style="font-weight: bold;">Te Kōhanga</a>
        <a class="navbar-brand">
            <img src="static/figs/Te Ipukarea logo.png" alt="Te Ipukarea logo" width="97" height="70"/>
        </a>
    </nav>

    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card shadow">
                    <div class="card-header text-center">
                        <h4>Welcome to Te Kōhanga</h4>
                    </div>
                    <div class="card-body">
                        <form id="loginForm">
                            <div class="mb-3">
                                <label for="authCode" class="form-label">Authentication Code</label>
                                <input
                                    type="password"
                                    class="form-control"
                                    id="authCode"
                                    name="authCode"
                                    placeholder="Enter your code here:"
                                    required
                                />
                            </div>
                            <div class="d-flex justify-content-center">
                                <button type="submit" class="btn btn-secondary w-50">Sign Me In</button>
                            </div>
                            <div id="errorMessage" class="text-danger text-center mt-3" style="display: none;">
                                Incorrect code. Please try again.
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="py-4 bg-light mt-auto">
        <div class="container-fluid px-4 text-center">
            <div class="text-muted">
                Copyright &copy; Te Ipukarea Research Institute 2025, 
                <a href="https://www.teipukarea.maori.nz/en" target="_blank">Visit Our Website</a>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const loginForm = document.getElementById('loginForm');
            const authCodeInput = document.getElementById('authCode');
            const errorMessage = document.getElementById('errorMessage');

            loginForm.addEventListener('submit', (event) => {
                event.preventDefault(); // Prevent form submission
                const enteredCode = authCodeInput.value.trim().toLowerCase();

                if (enteredCode === '2dots25') {
                    // Redirect to the dashboard if the code matches
                    window.location.href = '/dashboard';
                } else {
                    // Show error message
                    errorMessage.style.display = 'block';
                }
            });
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>